
<main class="page-wrapper">
  <!-- Page Title-->
  <!-- <div class="page-title-overlap bg-accent pt-4" *ngIf="selected">
    <div class="container d-lg-flex justify-content-between py-2 py-lg-3">
      <div class="order-lg-2 mb-3 mb-lg-0 pt-lg-2">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb breadcrumb-light flex-lg-nowrap justify-content-center justify-content-lg-start">

            <li class="breadcrumb-item text-nowrap"><a href="home-nft.html">Bookshelf</a>
            </li>
            <li class="breadcrumb-item text-nowrap active" aria-current="page"></li>
          </ol>
        </nav>
      </div>
      <div class="order-lg-1 pe-lg-4 text-center text-lg-start">
        <h1 class="h3 text-light mb-0">{{selected.title}}</h1>
      </div>
    </div>
  </div> -->
  <section class="container pb-md-4">
    <!-- Product-->
    <div class="bg-light shadow-lg rounded-3 px-4 py-lg-4 py-3 mb-5" *ngIf="selected" >
      <div class="py-lg-3 py-2 px-lg-3">
        <div class="row gy-4">
          <!-- Product image-->
          <div class="col-lg-6">
            <div class="position-relative rounded-3 overflow-hidden mb-lg-4 mb-2"><img class="image-zoom" [src]="selected.imgUrl" data-zoom="img/nft/catalog/single.jpg" alt="Product image">
              <div class="image-zoom-pane"></div>
            </div>
            <div class="pt-2 text-lg-start text-center">
              <button (click)="favoritesAddOrRemove(selected)" class="btn btn-secondary rounded-pill btn-icon me-sm-3 me-2" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Add to Favorites"><i class="ci-heart"></i></button>

            </div>
          </div>
          <!-- Product details-->
          <div class="col-lg-6">
            <div class="ps-xl-5 ps-lg-3">
              <!-- Meta-->
              <h2 class="h3 mb-3">{{selected.title}}</h2>

              <div class="d-flex align-items-center flex-wrap text-nowrap mb-sm-4 mb-3 fs-sm">
                <div class="mb-2 me-sm-3 me-2 text-muted">ISBN: {{selected.isbn10}}</div>
              </div>

              <div class="d-flex align-items-center flex-wrap text-nowrap mb-sm-4 mb-3 fs-sm">
                <div class="mb-2 me-sm-3 me-2 text-muted">Published: {{selected.publishDate | date: 'mediumDate'}}</div>
                <!-- <div class="mb-2 me-sm-3 me-2 ps-sm-3 ps-2 border-start text-muted"><i class="ci-eye me-1 fs-base mt-n1 align-middle"></i>{{favoriteCount()}} favorites</div> -->
                <div class="favorites indicator" >
                  <div *ngIf="favoriteDisabled == false" (click)="favoritesAddOrRemove(selected)" class="mb-2 me-sm-3 me-2 ps-sm-3 ps-2 border-start text-muted"><i class="ci-heart me-1 fs-base mt-n1 align-middle"></i>Add to favorites</div>
                  <div *ngIf="favoriteDisabled == true" (click)="favoritesAddOrRemove(selected)" class="mb-2 me-sm-3 me-2 ps-sm-3 ps-2 border-start text-muted"><i *ngIf="favoriteDisabled == true" class="ci-heart me-1 fs-base mt-n1 align-middle"></i>Favorited!</div>
                </div>
              </div>
              <div class="row row-cols-sm-2 row-cols-1 gy-3 gx-4 mb-4 pb-md-2">
                <!-- Creator-->
                <div class="col">
                  <div class="card position-relative h-100">
                    <div class="card-body p-3">
                      <h3 class="h6 mb-2 fs-sm text-muted">Author</h3>
                      <div class="d-flex align-items-center"><img class="rounded-circle me-2" src="assets/img/nft/catalog/avatars/01.png" width="32" alt="Avatar"><a class="nav-link-style stretched-link fs-sm" href="nft-vendor.html" *ngFor="let author of selected.authors">{{author.fullName}}</a></div>
                    </div>
                  </div>
                </div>
                <!-- Collection-->
                <div class="col">
                  <div class="card position-relative h-100">
                    <div class="card-body p-3">
                      <h3 class="h6 mb-2 fs-sm text-muted">Genre</h3>
                      <div class="d-flex align-items-center"><img class="rounded-circle me-2" src="assets/img/nft/catalog/avatars/13.png" width="32" alt="Avatar"><a class="nav-link-style stretched-link fs-sm" href="nft-catalog-v2.html" *ngFor="let category of selected.categories">{{category.name}}</a></div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Description-->
              <p class="mb-4 pb-md-2 fs-sm">{{selected.description}}</p>


              <div class="row row-cols-sm-2 row-cols-1 g-sm-4 g-3 mb-4">
                <!-- <div class="col"><a class="btn btn-lg btn-accent d-block w-100" href="#">Buy now</a></div> -->
                <div class="btn-group">
                  <button *ngIf="wishlistDisabled == false" (click)="wishlistAdd(selected)" class="btn btn-accent btn-lg" type="button">
                    Want to read
                  </button>
                  <button *ngIf="wishlistDisabled == true" class="btn btn-accent btn-lg" type="button" disabled>
                    Want to read
                  </button>
                  <button type="button" class="btn btn-lg btn-accent dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                    <span class="visually-hidden">Toggle Dropdown</span>
                  </button>
                  <div class="dropdown-menu">
                    <a *ngIf="readingDisabled === false" class="dropdown-item" (click)="readingAdd(selected)">Currently Reading</a>
                    <a *ngIf="readingDisabled === true" class="dropdown-item disabled">Currently Reading</a>
                    <a *ngIf="finishedDisabled === false" class="dropdown-item" (click)="finishedAdd(selected)">Finished Reading</a>
                    <a *ngIf="finishedDisabled === true" class="dropdown-item disabled">Finished Reading</a>
                  </div>
                </div>

              </div>
              <!-- Product info-->

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Reviews-->


  <section class="container mb-5 pb-md-4">

    <div class="border-top border-bottom my-lg-3 py-5">
      <div class="container pt-md-2" id="reviews">
        <div class="row pb-3">
          <div class="col-lg-4 col-md-5">
            <h2 class="h3 mb-4">{{reviews.length}} Reviews</h2>
            <div class="star-rating me-2" *ngIf="(overallRatingFlat()) === 1"><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i></div>
            <div class="star-rating me-2" *ngIf="(overallRatingFlat()) === 2"><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i></div>
            <div class="star-rating me-2" *ngIf="(overallRatingFlat()) === 3"><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i></div>
            <div class="star-rating me-2" *ngIf="(overallRatingFlat()) === 4"><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star fs-sm text-accent me-1"></i></div>
            <div class="star-rating me-2" *ngIf="(overallRatingFlat()) === 5"><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i><i class="ci-star-filled fs-sm text-accent me-1"></i></div>
            <span class="d-inline-block align-middle">{{overallRating() | number: '1.2-2'}} Overall Rating</span>
          </div>
          <div class="col-lg-8 col-md-7">
            <div class="d-flex align-items-center mb-2">
              <div class="text-nowrap me-3"><span class="d-inline-block align-middle text-muted">5</span><i class="ci-star-filled fs-xs ms-1"></i></div>
              <div class="w-100">
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar bg-success" role="progressbar" [style.width]="progressBar(5) + '%'" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div><span class="text-muted ms-3">{{progressCount(5)}}</span>
            </div>
            <div class="d-flex align-items-center mb-2">
              <div class="text-nowrap me-3"><span class="d-inline-block align-middle text-muted">4</span><i class="ci-star-filled fs-xs ms-1"></i></div>
              <div class="w-100">
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar" role="progressbar" [style.width]="progressBar(4) + '%'" style=" background-color: #a7e453;" aria-valuenow="27" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div><span class="text-muted ms-3">{{progressCount(4)}}</span>
            </div>
            <div class="d-flex align-items-center mb-2">
              <div class="text-nowrap me-3"><span class="d-inline-block align-middle text-muted">3</span><i class="ci-star-filled fs-xs ms-1"></i></div>
              <div class="w-100">
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar" role="progressbar" [style.width]="progressBar(3) + '%'" style=" background-color: #ffda75;" aria-valuenow="17" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div><span class="text-muted ms-3">{{progressCount(3)}}</span>
            </div>
            <div class="d-flex align-items-center mb-2">
              <div class="text-nowrap me-3"><span class="d-inline-block align-middle text-muted">2</span><i class="ci-star-filled fs-xs ms-1"></i></div>
              <div class="w-100">
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar" role="progressbar" [style.width]="progressBar(2) + '%'" style=" background-color: #fea569;" aria-valuenow="9" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div><span class="text-muted ms-3">{{progressCount(2)}}</span>
            </div>
            <div class="d-flex align-items-center">
              <div class="text-nowrap me-3"><span class="d-inline-block align-middle text-muted">1</span><i class="ci-star-filled fs-xs ms-1"></i></div>
              <div class="w-100">
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar bg-danger" role="progressbar" [style.width]="progressBar(1) + '%'" aria-valuenow="4" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
              </div><span class="text-muted ms-3">{{progressCount(1)}}</span>
            </div>
          </div>
        </div>
        <hr class="mt-4 mb-3">
        <div class="row pt-4">
          <!-- Reviews list-->
          <div class="col-md-7">
            <div class="d-flex justify-content-end pb-4">
            </div>
            <!-- Review-->
            <div class="product-review pb-4 mb-4 border-bottom" *ngFor="let review of reviews.slice().reverse()">
              <div class="d-flex mb-3" *ngIf="review.rating === 1">
                <div class="d-flex align-items-center me-4 pe-2"><img class="rounded-circle" [src]="review.user.imgUrl" width="50" alt="Rafael Marquez">
                  <div class="ps-3">
                    <h6 class="fs-sm mb-0">{{review.user.username}}</h6><span class="fs-ms text-muted">{{review.reviewDate | date: "medium"}}</span>
                  </div>
                </div>
                <div>
                  <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star"></i><i class="star-rating-icon ci-star"></i><i class="star-rating-icon ci-star"></i><i class="star-rating-icon ci-star"></i>
                  </div>
                </div>
              </div>
              <div class="d-flex mb-3" *ngIf="review.rating === 2">
                <div class="d-flex align-items-center me-4 pe-2"><img class="rounded-circle" [src]="review.user.imgUrl" width="50" alt="Rafael Marquez">
                  <div class="ps-3">
                    <h6 class="fs-sm mb-0">{{review.user.username}}</h6><span class="fs-ms text-muted">{{review.reviewDate | date: "medium"}}</span>
                  </div>
                </div>
                <div>
                  <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star"></i><i class="star-rating-icon ci-star"></i><i class="star-rating-icon ci-star"></i>
                  </div>
                </div>
              </div>
              <div class="d-flex mb-3" *ngIf="review.rating === 3">
                <div class="d-flex align-items-center me-4 pe-2"><img class="rounded-circle" [src]="review.user.imgUrl" width="50" alt="Rafael Marquez">
                  <div class="ps-3">
                    <h6 class="fs-sm mb-0">{{review.user.username}}</h6><span class="fs-ms text-muted">{{review.reviewDate | date: "medium"}}</span>
                  </div>
                </div>
                <div>
                  <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star"></i><i class="star-rating-icon ci-star"></i>
                  </div>
                </div>
              </div>
              <div class="d-flex mb-3" *ngIf="review.rating === 4">
                <div class="d-flex align-items-center me-4 pe-2"><img class="rounded-circle" [src]="review.user.imgUrl" width="50" alt="Rafael Marquez">
                  <div class="ps-3">
                    <h6 class="fs-sm mb-0">{{review.user.username}}</h6><span class="fs-ms text-muted">{{review.reviewDate | date: "medium"}}</span>
                  </div>
                </div>
                <div>
                  <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star"></i>
                  </div>
                </div>
              </div>
              <div class="d-flex mb-3" *ngIf="review.rating === 5">
                <div class="d-flex align-items-center me-4 pe-2"><img class="rounded-circle" [src]="review.user.imgUrl" width="50" alt="Rafael Marquez">
                  <div class="ps-3">
                    <h6 class="fs-sm mb-0">{{review.user.username}}</h6><span class="fs-ms text-muted">{{review.reviewDate | date: "medium"}}</span>
                  </div>
                </div>
                <div>
                  <div class="star-rating"><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i><i class="star-rating-icon ci-star-filled active"></i>
                  </div>
                </div>
              </div>
              <p class="fs-md mb-2">{{review.content}}</p>
              <div class="pt-2 ps-sm-3 mx-auto mx-sm-0 text-center" *ngIf="user?.id === review.user.id || user?.role === 'ROLE_ADMIN'">
                <button class="btn btn-outline-danger btn-sm" type="button" (click)="removeReview(review)" ><i class="ci-trash me-2"></i>Remove</button>
              </div>
            </div>
          </div>
          <!-- Leave review form-->
          <div class="col-md-5 mt-2 pt-4 mt-md-0 pt-md-0">
            <div class="bg-secondary py-grid-gutter px-grid-gutter rounded-3">
              <h3 class="h4 pb-2">Write a review</h3>
              <form class="needs-validation" method="post" novalidate>
                <div class="mb-3">
                  <label class="form-label" for="review-rating">Rating<span class="text-danger">*</span></label>
                  <select class="form-select" required id="review-rating" name="rating" [(ngModel)]="newReview.rating">
                    <option value="">Choose rating</option>
                    <option value="5">5 stars</option>
                    <option value="4">4 stars</option>
                    <option value="3">3 stars</option>
                    <option value="2">2 stars</option>
                    <option value="1">1 star</option>
                  </select>
                  <div class="invalid-feedback">Please choose rating!</div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="review-text">Review<span class="text-danger">*</span></label>
                  <textarea class="form-control" rows="6" required id="help-message"  name="title" [(ngModel)]="newReview.content"></textarea>
                </div>
                <button class="btn btn-primary btn-shadow d-block w-100" (click)="makeReview()">Submit Review</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>



</main>

<footer class="footer bg-darker">
  <!-- <div class="mt-n10 pt-10 bg-dark">
    <div class="container py-5">
      <div class="row py-lg-4">
        <div class="col-lg-4 mb-lg-0 mb-4"> -->
          <!-- <div class="widget pb-3 mb-lg-4"> -->
            <!-- <h3 class="widget-title text-light pb-1">Find More Books</h3>
            <form class="subscription-form validate"a>
              <div class="input-group flex-nowrap"><i class="ci-search position-absolute top-50 translate-middle-y text-muted fs-base ms-3"></i>
                <input class="form-control rounded-start" name="searchText" [(ngModel)]="searchText" type="text" placeholder="Search for more">

                <button class="btn btn-accent" type="submit" name="subscribe">SEARCH</button>
              </div> -->
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <!-- <div style="position: absolute; left: -5000px;" aria-hidden="true">
                <input class="subscription-form-antispam" type="text" name="b_c7103e2c981361a6639545bd5_29ca296126" tabindex="-1">
              </div> -->
              <!-- <div class="form-text text-light opacity-50">*Subscribe to our newsletter to receive early discount offers, updates and new products info.</div>
              <div class="subscription-status"></div> -->
            <!-- </form> -->
          <!-- </div> -->
          <!-- <div><a class="btn-social bs-light bs-twitter me-2 mb-2" href="#"><i class="ci-twitter"></i></a><a class="btn-social bs-light bs-facebook me-2 mb-2" href="#"><i class="ci-facebook"></i></a><a class="btn-social bs-light bs-instagram me-2 mb-2" href="#"><i class="ci-instagram"></i></a><a class="btn-social bs-light bs-pinterest me-2 mb-2" href="#"><i class="ci-pinterest"></i></a><a class="btn-social bs-light bs-youtube me-2 mb-2" href="#"><i class="ci-youtube"></i></a></div> -->
        <!-- </div> -->

      <!-- </div>
    </div>
  </div> -->
  <div class="container my-lg-4 my-3 py-2">
    <div class="d-flex flex-md-row flex-column-reverse align-items-center justify-content-md-between">
      <div class="fs-xs text-light opacity-50">&copy; All rights reserved. Made by Pearl Petunia</div>
      <div class="fs-xs text-light opacity-50" [routerLink]="['/postlist']">Nook</div>
      <div class="fs-xs text-light opacity-50" [routerLink]="['/bookshelf']">BookShelf</div>
      <div class="fs-xs text-light opacity-50" [routerLink]="['/postlist']">About</div>
      <!-- <div class="d-flex align-items-start mb-md-0 mb-3 mx-n1">
        <div class="px-1"><a class="btn-market btn-apple bg-dark" href="#"><span class="btn-market-subtitle">Download on the</span><span class="btn-market-title">App Store</span></a></div>
        <div class="px-1"><a class="btn-market btn-google bg-dark" href="#"><span class="btn-market-subtitle">Download on the</span><span class="btn-market-title">Google Play</span></a></div>
      </div> -->
    </div>
  </div>
</footer>
<!-- Toolbar for handheld devices (NFT Marketplace)-->
<div class="handheld-toolbar">
  <div class="d-table table-layout-fixed w-100"><a class="d-none handheld-toolbar-item" href="#vendor-sidebar" data-bs-toggle="offcanvas"><span class="handheld-toolbar-icon"><i class="ci-sign-in"></i></span><span class="handheld-toolbar-label">Sidebar</span></a><a class="d-table-cell handheld-toolbar-item" href="#signin-modal" data-bs-toggle="modal"><span class="handheld-toolbar-icon"><i class="ci-user"></i></span><span class="handheld-toolbar-label">Account</span></a><a class="d-table-cell handheld-toolbar-item" href="javascript:void(0)" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" onclick="window.scrollTo(0, 0)"><span class="handheld-toolbar-icon"><i class="ci-menu"></i></span><span class="handheld-toolbar-label">Menu</span></a><a class="d-table-cell handheld-toolbar-item" href="nft-connect-wallet.html"><span class="handheld-toolbar-icon"><i class="ci-wallet"></i></span><span class="handheld-toolbar-label text-nowrap">Connect wallet</span></a>
  </div>
</div>
<!-- Back To Top Button--><a class="btn-scroll-top" href="#top" data-scroll><span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span><i class="btn-scroll-top-icon ci-arrow-up">   </i></a>
<!-- Vendor scrits: js libraries and plugins-->
<script src="vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="vendor/simplebar/dist/simplebar.min.js"></script>
<script src="vendor/tiny-slider/dist/min/tiny-slider.js"></script>
<script src="vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script src="vendor/drift-zoom/dist/Drift.min.js"></script>
<!-- Main theme script-->
<script src="js/theme.min.js"></script>
